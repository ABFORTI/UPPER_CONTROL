graph LR
    subgraph Entrada["📥 Entrada"]
        S1[Cliente crea Solicitud]
        S1 --> S2[Datos:<br/>- Descripción<br/>- Área<br/>- Prioridad]
    end
    
    subgraph Aprobacion["✅ Aprobación"]
        A1[Coordinador revisa]
        A1 --> A2{¿Aprueba?}
        A2 -->|Sí| A3[Estado: aprobada]
        A2 -->|No| A4[Estado: rechazada]
    end
    
    subgraph OTCreacion["📋 Creación OT"]
        O1[Seleccionar Servicio]
        O1 --> O2[Seleccionar Centro]
        O2 --> O3[Definir Items]
        O3 --> O4[Asignar Team Leader]
        O4 --> O5[Crear OT]
    end
    
    subgraph Ejecucion["⚙️ Ejecución"]
        E1[Team Leader registra avances]
        E1 --> E2[Sube evidencias]
        E2 --> E3[Progreso alcanza 100%]
        E3 --> E4[Estado: completada]
    end
    
    subgraph Validacion["✅ Validación"]
        V1[Calidad revisa]
        V1 --> V2{¿Aprueba?}
        V2 -->|Sí| V3[Estado: validada_calidad]
        V2 -->|No| V4[Regresar a ejecución]
        V3 --> V5[Cliente revisa]
        V5 --> V6{¿Autoriza?}
        V6 -->|Sí| V7[Estado: validada_cliente]
        V6 -->|No| V8[Estado: bloqueada]
    end
    
    subgraph Facturacion["💰 Facturación"]
        F1[Crear Factura]
        F1 --> F2[Generar PDF + QR]
        F2 --> F3[Enviar a cliente]
        F3 --> F4[Subir XML]
        F4 --> F5[Marcar estados]
        F5 --> F6[Estado: pagado]
    end
    
    S2 --> A1
    A3 --> O1
    O5 --> E1
    E4 --> V1
    V7 --> F1
    V4 --> E1
    
    style Entrada fill:#e3f2fd,stroke:#1976d2
    style Aprobacion fill:#fff3e0,stroke:#f57c00
    style OTCreacion fill:#f3e5f5,stroke:#7b1fa2
    style Ejecucion fill:#e8f5e9,stroke:#388e3c
    style Validacion fill:#fce4ec,stroke:#c2185b
    style Facturacion fill:#fff9c4,stroke:#f9a825
