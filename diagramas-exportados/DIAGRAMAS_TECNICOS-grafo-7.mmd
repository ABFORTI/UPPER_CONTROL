graph LR
    subgraph Dispatch["📤 Dispatch"]
        D1[GenerateFacturaPdf::dispatch]
        D2[GenerateOrdenPdf::dispatch]
        D3[NotifyBackupOk]
        D4[NotifyBackupFailed]
    end
    
    subgraph Queue["⚙️ Queue Driver: sync"]
        Q1[Ejecuta inmediatamente]
        Q1 --> Q2[Sin cola real]
        Q2 --> Q3[Proceso síncrono]
    end
    
    subgraph Jobs["🎯 Jobs"]
        J1[GenerateFacturaPdf]
        J2[GenerateOrdenPdf]
    end
    
    subgraph Process["🔨 Procesamiento"]
        P1[handle method]
        P1 --> P2[Lógica del job]
        P2 --> P3[Interactuar con servicios]
        P3 --> P4[Guardar resultados]
    end
    
    subgraph Services["📦 Servicios Usados"]
        S1[Dompdf]
        S2[QR Generator]
        S3[Storage]
        S4[Mail]
    end
    
    D1 --> Q1
    D2 --> Q1
    D3 --> Q1
    D4 --> Q1
    
    Q3 --> J1
    Q3 --> J2
    
    J1 --> P1
    J2 --> P1
    
    P3 --> S1
    P3 --> S2
    P3 --> S3
    P3 --> S4
    
    style Queue fill:#ffeb3b,stroke:#f57f17,color:#000
    style Jobs fill:#4caf50,stroke:#2e7d32,color:#fff
    style Services fill:#2196f3,stroke:#1565c0,color:#fff
